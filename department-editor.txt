<div v-if="selectedDepartmentIndex !== null" class="floating-editor department-editor draggable-panel"
           :class="editorPosition"
           :style="editorStyle"
           ref="departmentEditor"
           @mousedown="startDrag($event, 'department')">
        <v-card color="primary" class="draggable-card">
          <v-card-title class="d-flex justify-space-between align-center text-white">
            <span>Department Editor</span>
            <div>
              <v-btn icon="mdi-refresh" @click="resetEditorPosition" variant="text" color="white" density="compact"></v-btn>
              <v-btn icon="mdi-close" @click="closeDepartmentEditor" variant="text" color="white" density="compact"></v-btn>
            </div>
          </v-card-title>
          <v-card-text class="bg-white">
            <v-text-field
              v-model="departments[selectedDepartmentIndex].name"
              label="Department Name"
              variant="outlined"
              density="compact"
            ></v-text-field>

            <v-slider
              v-model="departments[selectedDepartmentIndex].maxCrew"
              @update:model-value="updateDepartmentCrew(departments[selectedDepartmentIndex])"
              label="Max Crew Size"
              min="0"
              max="100"
              thumb-label
            >
              <template v-slot:append>
                <v-text-field
                  v-model="departments[selectedDepartmentIndex].maxCrew"
                  type="number"
                  style="width: 70px"
                  density="compact"
                  @input="updateDepartmentCrew(departments[selectedDepartmentIndex])"
                ></v-text-field>
              </template>
            </v-slider>

            <v-slider
              v-model="departments[selectedDepartmentIndex].startMonth"
              @update:model-value="updateDepartmentTimeframe(departments[selectedDepartmentIndex])"
              :label="'Start Month: ' + getMonthName(departments[selectedDepartmentIndex].startMonth)"
              min="0"
              :max="months.length - 1"
              thumb-label
            ></v-slider>

            <v-slider
              v-model="departments[selectedDepartmentIndex].endMonth"
              @update:model-value="updateDepartmentTimeframe(departments[selectedDepartmentIndex])"
              :label="'End Month: ' + getMonthName(departments[selectedDepartmentIndex].endMonth)"
              :min="departments[selectedDepartmentIndex].startMonth"
              :max="months.length - 1"
              thumb-label
            ></v-slider>

            <v-slider
              v-model="departments[selectedDepartmentIndex].rampUpDuration"
              @update:model-value="updateDepartmentRamp(departments[selectedDepartmentIndex])"
              :label="'Ramp Up Duration (months): ' + departments[selectedDepartmentIndex].rampUpDuration"
              min="0"
              :max="Math.max(1, Math.floor((departments[selectedDepartmentIndex].endMonth - departments[selectedDepartmentIndex].startMonth) / 2))"
              thumb-label
            ></v-slider>

            <v-slider
              v-model="departments[selectedDepartmentIndex].rampDownDuration"
              @update:model-value="updateDepartmentRamp(departments[selectedDepartmentIndex])"
              :label="'Ramp Down Duration (months): ' + departments[selectedDepartmentIndex].rampDownDuration"
              min="0"
              :max="Math.max(1, Math.floor((departments[selectedDepartmentIndex].endMonth - departments[selectedDepartmentIndex].startMonth) / 2))"
              thumb-label
            ></v-slider>

            <v-text-field
              v-model="departments[selectedDepartmentIndex].rate"
              @update:model-value="calculateCosts"
              label="Rate ($/month)"
              type="number"
              min="0"
              step="100"
              variant="outlined"
              density="compact"
            ></v-text-field>
          
            <div class="d-flex">
              <v-btn color="primary" @click="moveDepartmentUp" :disabled="selectedDepartmentIndex === 0" class="mr-2">
                Move Up
              </v-btn>
              <v-btn color="primary" @click="moveDepartmentDown" :disabled="selectedDepartmentIndex === departments.length - 1" class="mr-2">
                Move Down
              </v-btn>
              <v-spacer></v-spacer>
              <v-btn color="error" @click="removeDepartment">
                Remove Department
              </v-btn>
            </div>
          </v-card-text>
        </v-card>
      </div>